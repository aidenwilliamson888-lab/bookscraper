<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üì• OPEN LIBRARY LANDING PAGE GENERATOR - 100 BUKU/REQUEST</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: linear-gradient(145deg, #f8fafc 0%, #eef2f6 100%);
            padding: 30px 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        
        .header {
            background: linear-gradient(145deg, #0a2a3a, #0e3a4a);
            color: white;
            border-radius: 32px;
            padding: 45px;
            margin-bottom: 35px;
            box-shadow: 0 20px 40px rgba(10,42,58,0.2);
        }
        h1 { font-size: 2.6rem; font-weight: 800; margin-bottom: 15px; letter-spacing: -0.02em; }
        .subhead {
            font-size: 1.2rem;
            color: #b0e0e0;
            margin-bottom: 25px;
        }
        .badge {
            display: inline-block;
            padding: 8px 24px;
            border-radius: 60px;
            font-weight: 600;
            margin-right: 15px;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .badge-success {
            background: #27ae60;
            color: white;
        }
        
        .grid-main {
            display: grid;
            grid-template-columns: 1fr 1.3fr;
            gap: 30px;
        }
        @media (max-width: 1100px) { .grid-main { grid-template-columns: 1fr; } }
        
        .card {
            background: white;
            border-radius: 28px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.02);
            border: 1px solid rgba(255,255,255,0.5);
            backdrop-filter: blur(10px);
        }
        .card h2 {
            font-size: 1.6rem;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #0a2a3a;
            border-bottom: 2px solid #ecf3fa;
            padding-bottom: 20px;
        }
        
        .form-group { margin-bottom: 25px; }
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.95rem;
        }
        input, select, textarea {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e0e8f0;
            border-radius: 16px;
            font-size: 1rem;
            transition: 0.2s;
            background: white;
        }
        input:focus, select:focus, textarea:focus {
            border-color: #0a2a3a;
            outline: none;
            box-shadow: 0 0 0 4px rgba(10,42,58,0.05);
        }
        
        .btn {
            background: #0a2a3a;
            color: white;
            border: none;
            padding: 16px 28px;
            border-radius: 40px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: 0.2s;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        .btn:hover {
            background: #1e4a5a;
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(10,42,58,0.2);
        }
        .btn-success {
            background: #27ae60;
        }
        .btn-warning {
            background: #e67e22;
        }
        
        .book-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            max-height: 600px;
            overflow-y: auto;
            padding: 15px;
            background: #f8fbfe;
            border-radius: 20px;
            border: 1px solid #e0e8f0;
        }
        
        .book-card-preview {
            background: white;
            border-radius: 16px;
            padding: 16px;
            border: 1px solid #ecf0f1;
            transition: 0.2s;
        }
        .book-card-preview:hover {
            border-color: #0a2a3a;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        
        .cover-preview {
            width: 100%;
            height: 180px;
            object-fit: contain;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 12px;
        }
        
        .stats-panel {
            background: linear-gradient(145deg, #f8fbfe, #f0f5fa);
            border-radius: 20px;
            padding: 25px;
            margin-top: 25px;
            border: 1px solid #d0e0f0;
        }
        .stats-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px dashed #d0e0f0;
        }
        .stats-value {
            font-weight: 700;
            color: #0a2a3a;
        }
        
        .filename-example {
            background: #0a2a3a;
            color: white;
            padding: 16px 20px;
            border-radius: 40px;
            font-family: 'SF Mono', 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            margin-top: 20px;
            word-break: break-all;
        }
        
        .button-preview {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        .btn-sample {
            padding: 12px 24px;
            border-radius: 40px;
            font-weight: 600;
            font-size: 0.9rem;
            background: #f8f9fa;
            border: 1px solid #d0e0f0;
        }
        .btn-sample-primary {
            background: #0a2a3a;
            color: white;
        }
        .btn-sample-ads {
            background: #f39c12;
            color: white;
        }
        
        .smartlink-section {
            background: #fff9e6;
            border: 2px dashed #f39c12;
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <h1>üì• OPEN LIBRARY ¬∑ LANDING PAGE GENERATOR</h1>
            <p class="subhead">
                Format: [Download|PDF|EPUB] Judul Buku by Penulis ¬∑ 2 Button ¬∑ SEO Ready
            </p>
            <div>
                <span class="badge">üìö Open Library API</span>
                <span class="badge">üéØ 100 buku/request</span>
                <span class="badge badge-success">üñºÔ∏è Cover 100% working</span>
                <span class="badge">üîó 2 Button (Source + Smartlink)</span>
            </div>
        </div>

        <!-- MAIN GRID -->
        <div class="grid-main">
            <!-- LEFT PANEL - INPUT -->
            <div class="card">
                <h2>
                    <span>‚öôÔ∏è</span>
                    1. Konfigurasi Landing Page
                </h2>
                
                <div class="form-group">
                    <label>üìö Keyword Pencarian Buku</label>
                    <input type="text" id="keyword" value="programming python" placeholder="Contoh: harry potter, tolkien, python programming">
                    <p style="color: #27ae60; font-size: 0.85rem; margin-top: 6px;">
                        ‚úÖ Open Library API: 100 buku per request, tanpa API key
                    </p>
                </div>
                
                <div class="form-group">
                    <label>üåê Domain / Nama Situs</label>
                    <input type="text" id="domain" value="download-buku-gratis.com" placeholder="namasituskamu.com">
                </div>
                
                <div class="form-group">
                    <label>üìÑ Format Judul File</label>
                    <select id="titleFormat">
                        <option value="1" selected>[Download] {title} by {author}</option>
                        <option value="2">[PDF] {title} by {author}</option>
                        <option value="3">[EPUB] {title} by {author}</option>
                        <option value="4">[Download PDF] {title} by {author}</option>
                        <option value="5">[Free Download] {title} by {author}</option>
                        <option value="6">{title} by {author} [PDF/EPUB]</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>üîó Limit Buku</label>
                    <select id="limit">
                        <option value="20">20 buku</option>
                        <option value="50">50 buku</option>
                        <option value="100" selected>100 buku (maksimal)</option>
                    </select>
                </div>
                
                <!-- SMARTLINK SECTION -->
                <div class="smartlink-section">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                        <span style="background: #f39c12; color: white; padding: 6px 20px; border-radius: 60px; font-weight: bold;">üí∞ SMARTLINK ADS</span>
                        <span style="color: #b45f06;">Button 2 akan mengarah ke link ini</span>
                    </div>
                    
                    <div class="form-group">
                        <label>üîó Smartlink URL (Adsterra / Adsense / Afiliasi)</label>
                        <input type="text" id="smartlink" value="https://adsterra.com/referral/your-id" placeholder="https://smartlinkanda.com/ref=xxx">
                        <p style="color: #666; font-size: 0.8rem; margin-top: 6px;">
                            ‚ö° Button "Download via Partner" akan menggunakan link ini
                        </p>
                    </div>
                    
                    <div class="form-group">
                        <label>üì¢ Teks Button Smartlink</label>
                        <input type="text" id="buttonText" value="üì• Download via Partner (Fast Server)">
                    </div>
                </div>
                
                <!-- ADS SCRIPT -->
                <div style="background: #f0f9ff; border: 1px dashed #3498db; border-radius: 20px; padding: 25px; margin: 30px 0;">
                    <label style="color: #1a4a5a;">üì¢ ADS SCRIPT (Header/Footer)</label>
                    <textarea id="adsScript" rows="3" placeholder="&lt;!-- Script iklan Adsterra/Adsense --&gt;">&lt;div style=&quot;background: #0a2a3a; color: white; padding: 20px; border-radius: 12px; text-align: center;&quot;&gt;
    üì¢ IKLAN ANDA DI SINI
&lt;/div&gt;</textarea>
                </div>
                
                <button onclick="fetchOpenLibraryBooks()" class="btn">
                    üì• AMBIL 100 BUKU DARI OPEN LIBRARY API
                </button>
                
                <div id="progressBlock" style="display: none; margin-top: 25px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span id="progressStatus">Memproses...</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div style="width: 100%; height: 8px; background: #ecf0f1; border-radius: 10px; overflow: hidden;">
                        <div id="progressFill" style="height: 100%; background: #27ae60; width: 0%; transition: width 0.25s;"></div>
                    </div>
                </div>
                
                <!-- CONTOH FILENAME -->
                <div class="filename-example" id="filenameExample">
                    üìÑ [Download] Python Programming by John Smith - download-buku-gratis.com.html
                </div>
            </div>
            
            <!-- RIGHT PANEL - PREVIEW & OUTPUT -->
            <div class="card">
                <h2>
                    <span>üìã</span>
                    2. Preview & Download
                </h2>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <span style="font-weight: 700; font-size: 1.1rem;">üìö Buku Ditemukan:</span>
                    <span id="bookCount" style="background: #0a2a3a; color: white; padding: 8px 24px; border-radius: 60px; font-weight: 600;">0</span>
                </div>
                
                <!-- COVER STATS -->
                <div id="coverStats" style="display: none; background: #f8fbfe; border-radius: 16px; padding: 20px; margin-bottom: 25px;">
                    <span style="font-weight: 700;">üñºÔ∏è STATUS COVER:</span>
                    <div style="display: flex; gap: 25px; margin-top: 12px; flex-wrap: wrap;">
                        <span id="statCoverId" style="color: #27ae60;">‚úÖ Cover ID: 0</span>
                        <span id="statCoverEdition" style="color: #3498db;">üìö Cover Edition: 0</span>
                        <span id="statPlaceholder" style="color: #e67e22;">üñºÔ∏è Placeholder: 0</span>
                    </div>
                </div>
                
                <!-- PREVIEW GRID -->
                <div id="bookGridPreview" class="book-preview-grid" style="min-height: 400px;">
                    <div style="grid-column: 1/-1; text-align: center; color: #7f8c8d; padding: 60px;">
                        ‚è≥ Generate untuk melihat 100 buku dengan cover
                    </div>
                </div>
                
                <!-- PREVIEW BUTTON -->
                <div style="margin-top: 25px; background: #f8fbfe; border-radius: 16px; padding: 20px;">
                    <span style="font-weight: 700; display: block; margin-bottom: 15px;">üîò PREVIEW 2 BUTTON:</span>
                    <div class="button-preview">
                        <div class="btn-sample btn-sample-primary">
                            üìñ Baca di Open Library
                        </div>
                        <div class="btn-sample btn-sample-ads">
                            üì• Download via Partner
                        </div>
                    </div>
                    <p style="color: #666; font-size: 0.85rem; margin-top: 15px;">
                        ‚úÖ Button 1: Link ke Open Library (sumber asli)<br>
                        ‚úÖ Button 2: Link ke Smartlink Ads Anda
                    </p>
                </div>
                
                <!-- DOWNLOAD BUTTONS -->
                <div style="display: flex; gap: 15px; margin-top: 30px;">
                    <button onclick="downloadAllLandingPages()" class="btn btn-success" id="downloadBtn" disabled style="flex: 2;">
                        üì¶ DOWNLOAD 100 LANDING PAGE (ZIP)
                    </button>
                    <button onclick="downloadSitemap()" class="btn" id="sitemapBtn" disabled style="flex: 1; background: #3498db;">
                        üó∫Ô∏è SITEMAP
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // OPEN LIBRARY API - LANDING PAGE GENERATOR
        // 100 BUKU/REQUEST - TANPA API KEY
        // FORMAT: [Download] Title by Author
        // 2 BUTTON: Open Library + Smartlink Ads
        // ============================================
        
        let currentBooks = [];
        let coverStats = { coverId: 0, coverEdition: 0, placeholder: 0 };
        
        // GENERATE ID UNIK
        function generateId() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz23456789';
            let id = '';
            for (let i = 0; i < 6; i++) id += chars.charAt(Math.floor(Math.random() * chars.length));
            return id;
        }
        
        // FORMAT JUDUL BERDASARKAN TEMPLATE
        function formatTitle(template, title, author, uniqueId) {
            const cleanTitle = title.substring(0, 80);
            const cleanAuthor = author !== 'Unknown Author' ? author : 'Unknown';
            
            switch(template) {
                case '1': return `[Download] ${cleanTitle} by ${cleanAuthor}`;
                case '2': return `[PDF] ${cleanTitle} by ${cleanAuthor}`;
                case '3': return `[EPUB] ${cleanTitle} by ${cleanAuthor}`;
                case '4': return `[Download PDF] ${cleanTitle} by ${cleanAuthor}`;
                case '5': return `[Free Download] ${cleanTitle} by ${cleanAuthor}`;
                case '6': return `${cleanTitle} by ${cleanAuthor} [PDF/EPUB]`;
                default: return `[Download] ${cleanTitle} by ${cleanAuthor}`;
            }
        }
        
        // GENERATE COVER URL - OPEN LIBRARY
        function getCoverUrl(book) {
            // LEVEL 1: Cover ID (paling umum)
            if (book.cover_i) {
                coverStats.coverId++;
                return {
                    url: `https://covers.openlibrary.org/b/id/${book.cover_i}-L.jpg`,
                    source: 'Cover ID'
                };
            }
            
            // LEVEL 2: Cover Edition Key
            if (book.cover_edition_key) {
                coverStats.coverEdition++;
                return {
                    url: `https://covers.openlibrary.org/b/olid/${book.cover_edition_key}-L.jpg`,
                    source: 'Cover Edition'
                };
            }
            
            // LEVEL 3: ISBN (jika ada)
            if (book.isbn && book.isbn.length > 0) {
                const isbn = book.isbn[0];
                coverStats.coverEdition++;
                return {
                    url: `https://covers.openlibrary.org/b/isbn/${isbn}-L.jpg`,
                    source: 'ISBN'
                };
            }
            
            // LEVEL 4: Placeholder dengan judul
            coverStats.placeholder++;
            const cleanTitle = encodeURIComponent(book.title.substring(0, 50));
            const colors = ['0a2a3a', '1e4a5a', '2c5a6a', '3a6a7a', '4a7a8a'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            return {
                url: `https://via.placeholder.com/400x600/${color}/FFFFFF?text=${cleanTitle}`,
                source: 'Placeholder'
            };
        }
        
        // FETCH BUKU DARI OPEN LIBRARY API
        async function fetchOpenLibraryBooks() {
            const keyword = document.getElementById('keyword').value.trim();
            const limit = parseInt(document.getElementById('limit').value);
            
            if (!keyword) {
                alert('Masukkan keyword!');
                return;
            }
            
            // Reset stats
            currentBooks = [];
            coverStats = { coverId: 0, coverEdition: 0, placeholder: 0 };
            
            // Show progress
            document.getElementById('progressBlock').style.display = 'block';
            document.getElementById('progressFill').style.width = '20%';
            document.getElementById('progressPercent').innerHTML = '20%';
            document.getElementById('progressStatus').innerHTML = 'üì° Mengambil data dari Open Library API...';
            
            try {
                // Open Library Search API - GRATIS, TANPA API KEY
                const url = `https://openlibrary.org/search.json?q=${encodeURIComponent(keyword)}&limit=${limit}`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (!data.docs || data.docs.length === 0) {
                    throw new Error('Tidak ada buku ditemukan');
                }
                
                document.getElementById('progressFill').style.width = '50%';
                document.getElementById('progressPercent').innerHTML = '50%';
                document.getElementById('progressStatus').innerHTML = 'üñºÔ∏è Memproses cover dan metadata...';
                
                const books = data.docs.slice(0, limit);
                
                for (let i = 0; i < books.length; i++) {
                    const book = books[i];
                    const uniqueId = generateId();
                    
                    // Author
                    let author = 'Unknown Author';
                    if (book.author_name && book.author_name.length > 0) {
                        author = book.author_name[0];
                    }
                    
                    // Tahun publikasi
                    let publishYear = 'Unknown';
                    if (book.first_publish_year) {
                        publishYear = book.first_publish_year;
                    } else if (book.publish_year && book.publish_year.length > 0) {
                        publishYear = book.publish_year[0];
                    }
                    
                    // Publisher
                    let publisher = 'Unknown Publisher';
                    if (book.publisher && book.publisher.length > 0) {
                        publisher = book.publisher[0];
                    }
                    
                    // ISBN
                    let isbn = '';
                    if (book.isbn && book.isbn.length > 0) {
                        isbn = book.isbn[0];
                    }
                    
                    // Open Library ID
                    let olid = book.cover_edition_key || book.edition_key?.[0] || '';
                    
                    // Cover
                    const coverData = getCoverUrl(book);
                    
                    // Format judul file
                    const template = document.getElementById('titleFormat').value;
                    const domain = document.getElementById('domain').value.trim();
                    
                    let cleanTitle = book.title || 'Untitled';
                    let cleanAuthor = author;
                    
                    const fileTitle = formatTitle(template, cleanTitle, cleanAuthor, uniqueId);
                    
                    // Slug untuk filename
                    const slug = fileTitle
                        .toLowerCase()
                        .replace(/[^\w\s-]/gi, '')
                        .replace(/\s+/g, '-')
                        .substring(0, 80);
                    
                    const filename = `${slug}-${domain}.html`;
                    
                    const bookData = {
                        id: uniqueId,
                        olid: olid,
                        isbn: isbn,
                        title: cleanTitle,
                        author: cleanAuthor,
                        publishYear: publishYear,
                        publisher: publisher,
                        coverUrl: coverData.url,
                        coverSource: coverData.source,
                        openLibraryUrl: `https://openlibrary.org${book.key || ''}`,
                        fileTitle: fileTitle,
                        filename: filename
                    };
                    
                    currentBooks.push(bookData);
                    
                    // Update progress
                    const progress = 50 + ((i + 1) / books.length * 40);
                    document.getElementById('progressFill').style.width = progress + '%';
                    document.getElementById('progressPercent').innerHTML = Math.round(progress) + '%';
                    document.getElementById('progressStatus').innerHTML = `üìö Memproses buku ${i+1}/${books.length}...`;
                    
                    await new Promise(r => setTimeout(r, 2));
                }
                
                // Update UI
                document.getElementById('bookCount').innerHTML = currentBooks.length;
                document.getElementById('downloadBtn').disabled = false;
                document.getElementById('sitemapBtn').disabled = false;
                
                // Update cover stats
                document.getElementById('coverStats').style.display = 'block';
                document.getElementById('statCoverId').innerHTML = `‚úÖ Cover ID: ${coverStats.coverId}`;
                document.getElementById('statCoverEdition').innerHTML = `üìö Cover Edition/ISBN: ${coverStats.coverEdition}`;
                document.getElementById('statPlaceholder').innerHTML = `üñºÔ∏è Placeholder: ${coverStats.placeholder}`;
                
                // Preview grid
                displayPreview();
                
                // Update contoh filename
                if (currentBooks.length > 0) {
                    document.getElementById('filenameExample').innerHTML = `üìÑ ${currentBooks[0].fileTitle} - ${document.getElementById('domain').value}.html`;
                }
                
                document.getElementById('progressFill').style.width = '100%';
                document.getElementById('progressPercent').innerHTML = '100%';
                document.getElementById('progressStatus').innerHTML = '‚úÖ Selesai! 100 buku siap didownload';
                
            } catch (error) {
                console.error(error);
                alert('‚ùå Error: ' + error.message);
                document.getElementById('progressBlock').style.display = 'none';
            }
        }
        
        function displayPreview() {
            const grid = document.getElementById('bookGridPreview');
            let html = '';
            
            currentBooks.slice(0, 12).forEach(book => {
                let badgeClass = 'cover-success';
                let badgeText = '‚úì Cover ID';
                
                if (book.coverSource === 'Cover Edition' || book.coverSource === 'ISBN') {
                    badgeClass = 'cover-fallback';
                    badgeText = 'üìö ' + book.coverSource;
                } else if (book.coverSource === 'Placeholder') {
                    badgeClass = 'cover-fallback';
                    badgeText = 'üñºÔ∏è Placeholder';
                }
                
                html += `
                    <div class="book-card-preview">
                        <img class="cover-preview" src="${book.coverUrl}" alt="${book.title}" 
                             onerror="this.src='https://via.placeholder.com/400x600/0a2a3a/FFFFFF?text=${encodeURIComponent(book.title.substring(0, 30))}'">
                        <div style="font-weight: 600; font-size: 0.85rem; margin-bottom: 4px;">${book.title.substring(0, 40)}${book.title.length > 40 ? '...' : ''}</div>
                        <div style="color: #666; font-size: 0.7rem; margin-bottom: 8px;">${book.author}</div>
                        <span style="display: inline-block; padding: 4px 10px; border-radius: 30px; font-size: 0.65rem; background: #e8f5e9; color: #27ae60;">${badgeText}</span>
                    </div>
                `;
            });
            
            if (currentBooks.length > 12) {
                html += `<div style="grid-column: 1/-1; text-align: center; padding: 20px; color: #7f8c8d;">
                    ... dan ${currentBooks.length - 12} buku lainnya
                </div>`;
            }
            
            grid.innerHTML = html;
        }
        
        // GENERATE HTML LANDING PAGE
        function generateLandingPage(book, domain, smartlink, buttonText, adsScript) {
            const year = new Date().getFullYear();
            const today = new Date().toLocaleDateString('en-US', { 
                day: 'numeric', month: 'long', year: 'numeric' 
            });
            
            return `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${book.fileTitle}</title>
    <meta name="description" content="Download ${book.title} by ${book.author}. Free PDF, EPUB available. Read online or download from Open Library.">
    <meta name="keywords" content="${book.title}, ${book.author}, download book, free pdf, epub download, open library">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://${domain}/${book.filename}">
    
    <!-- Open Graph -->
    <meta property="og:title" content="${book.fileTitle}">
    <meta property="og:description" content="Download ${book.title} by ${book.author}. Free PDF/EPUB.">
    <meta property="og:image" content="${book.coverUrl}">
    <meta property="og:url" content="https://${domain}/${book.filename}">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="${domain}">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="${book.fileTitle}">
    <meta name="twitter:description" content="Download ${book.title} by ${book.author} - Free PDF/EPUB">
    <meta name="twitter:image" content="${book.coverUrl}">
    
    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Book",
        "name": "${book.title}",
        "author": {
            "@type": "Person",
            "name": "${book.author}"
        },
        "datePublished": "${book.publishYear}",
        "publisher": {
            "@type": "Organization",
            "name": "${book.publisher}"
        },
        "image": "${book.coverUrl}",
        "url": "https://${domain}/${book.filename}"
    }
    </script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(145deg, #f8fafc, #f0f4f8);
            color: #1a2a3a;
            line-height: 1.7;
            padding: 30px 20px;
        }
        .container { max-width: 1100px; margin: 0 auto; }
        .landing-card {
            background: white;
            border-radius: 32px;
            padding: 45px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.02);
            border: 1px solid #ecf0f1;
        }
        .book-header {
            display: flex;
            gap: 40px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        .cover {
            flex: 0 0 250px;
        }
        .cover img {
            width: 100%;
            border-radius: 16px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        .info {
            flex: 1;
        }
        h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 15px;
            color: #0a2a3a;
            line-height: 1.2;
        }
        .meta {
            color: #4a6a7a;
            margin-bottom: 25px;
            font-size: 1.1rem;
        }
        .button-group {
            display: flex;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .btn {
            padding: 16px 32px;
            border-radius: 60px;
            font-weight: 700;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: 0.2s;
            flex: 1;
            font-size: 1.1rem;
        }
        .btn-primary {
            background: #0a2a3a;
            color: white;
        }
        .btn-primary:hover {
            background: #1e4a5a;
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(10,42,58,0.2);
        }
        .btn-ads {
            background: #f39c12;
            color: white;
        }
        .btn-ads:hover {
            background: #e67e22;
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(243,156,18,0.2);
        }
        .details {
            background: #f8fbfe;
            border-radius: 24px;
            padding: 30px;
            margin: 40px 0;
        }
        .detail-row {
            display: flex;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #ecf0f1;
        }
        .detail-label {
            font-weight: 700;
            width: 120px;
            color: #4a6a7a;
        }
        .detail-value {
            color: #0a2a3a;
        }
        .ads-container {
            margin: 40px 0;
            padding: 25px;
            background: #fff9e6;
            border-radius: 20px;
            text-align: center;
            border: 2px dashed #f39c12;
        }
        .footer {
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid #ecf0f1;
            color: #6a7a8a;
            text-align: center;
            font-size: 0.9rem;
        }
        .id-badge {
            display: inline-block;
            background: #0a2a3a;
            color: white;
            padding: 6px 20px;
            border-radius: 60px;
            font-size: 0.8rem;
            margin-bottom: 20px;
        }
        @media (max-width: 768px) {
            .landing-card { padding: 25px; }
            .book-header { flex-direction: column; }
            h1 { font-size: 1.6rem; }
            .button-group { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="landing-card">
            
            <!-- ADS TOP -->
            <div class="ads-container" style="margin-top: 0;">
                ${adsScript}
            </div>
            
            <span class="id-badge">üî¢ ID: ${book.id} ¬∑ Open Library</span>
            
            <div class="book-header">
                <div class="cover">
                    <img src="${book.coverUrl}" alt="${book.title} Cover" 
                         onerror="this.src='https://via.placeholder.com/400x600/0a2a3a/FFFFFF?text=${encodeURIComponent(book.title.substring(0, 30))}'">
                </div>
                <div class="info">
                    <h1>${book.fileTitle}</h1>
                    <div class="meta">
                        By <strong>${book.author}</strong> ¬∑ Published: ${book.publishYear}
                    </div>
                    
                    <!-- 2 BUTTON UTAMA -->
                    <div class="button-group">
                        <a href="${book.openLibraryUrl}" class="btn btn-primary" target="_blank" rel="nofollow">
                            üìñ Baca di Open Library
                        </a>
                        <a href="${smartlink}" class="btn btn-ads" target="_blank" rel="nofollow sponsored">
                            ${buttonText}
                        </a>
                    </div>
                    
                    <p style="color: #27ae60; font-size: 0.9rem;">
                        ‚ö° Format tersedia: PDF, EPUB, MOBI (via Open Library)
                    </p>
                </div>
            </div>
            
            <!-- DETAIL BUKU -->
            <div class="details">
                <h2 style="margin-bottom: 20px; font-size: 1.4rem;">üìò Book Details</h2>
                <div class="detail-row">
                    <span class="detail-label">Title</span>
                    <span class="detail-value">${book.title}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Author</span>
                    <span class="detail-value">${book.author}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Publisher</span>
                    <span class="detail-value">${book.publisher}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Published</span>
                    <span class="detail-value">${book.publishYear}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ISBN</span>
                    <span class="detail-value">${book.isbn || 'N/A'}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Open Library ID</span>
                    <span class="detail-value">${book.olid || book.id || 'N/A'}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Cover Source</span>
                    <span class="detail-value">Open Library ¬∑ ${book.coverSource}</span>
                </div>
            </div>
            
            <!-- ADS MIDDLE -->
            <div class="ads-container">
                ${adsScript}
            </div>
            
            <!-- FOOTER -->
            <div class="footer">
                <p>¬© ${year} ${domain} ¬∑ Free Book Download Portal</p>
                <p style="margin-top: 12px; font-size: 0.8rem;">
                    üìö Sumber konten: Open Library (openlibrary.org) ¬∑ File ini adalah landing page, bukan file buku.<br>
                    ID: ${book.id} ¬∑ Generated: ${today}
                </p>
            </div>
        </div>
    </div>
</body>
</html>`;
        }
        
        // GENERATE SITEMAP
        function generateSitemap(books, domain) {
            let xml = `<?xml version="1.0" encoding="UTF-8"?>\n<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n`;
            
            books.forEach(book => {
                xml += `  <url>\n    <loc>https://${domain}/${book.filename}</loc>\n    <lastmod>${new Date().toISOString().split('T')[0]}</lastmod>\n    <changefreq>monthly</changefreq>\n    <priority>0.7</priority>\n  </url>\n`;
            });
            
            xml += `</urlset>`;
            return xml;
        }
        
        // GENERATE INDEX HTML
        function generateIndexHTML(books, domain) {
            let html = `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Free Book Downloads - ${domain}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: #f8fafc; padding: 40px 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { color: #0a2a3a; margin-bottom: 30px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 25px; }
        .card { background: white; border-radius: 20px; padding: 20px; border: 1px solid #ecf0f1; }
        img { width: 100%; height: 200px; object-fit: contain; margin-bottom: 15px; }
        a { text-decoration: none; color: #0a2a3a; font-weight: 600; }
        .btn { display: inline-block; background: #0a2a3a; color: white; padding: 8px 20px; border-radius: 40px; margin-top: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö ${books.length} Free Books Download</h1>
        <div class="grid">`;
            
            books.slice(0, 50).forEach(book => {
                html += `
            <div class="card">
                <img src="${book.coverUrl}" alt="${book.title}">
                <h3 style="font-size: 0.95rem;">${book.title.substring(0, 50)}</h3>
                <p style="color: #666; font-size: 0.8rem;">${book.author}</p>
                <a href="${book.filename}" class="btn">üì• Download</a>
            </div>`;
            });
            
            html += `
        </div>
    </div>
</body>
</html>`;
            return html;
        }
        
        // DOWNLOAD SEMUA LANDING PAGE
        async function downloadAllLandingPages() {
            if (currentBooks.length === 0) {
                alert('Generate dulu!');
                return;
            }
            
            const zip = new JSZip();
            const domain = document.getElementById('domain').value.trim().replace(/^https?:\/\//, '').replace(/\/$/, '');
            const smartlink = document.getElementById('smartlink').value.trim();
            const buttonText = document.getElementById('buttonText').value.trim();
            const adsScript = document.getElementById('adsScript').value;
            
            const folderName = `open-library-${document.getElementById('keyword').value.replace(/\s+/g, '-').toLowerCase()}`;
            const folder = zip.folder(folderName);
            
            document.getElementById('progressStatus').innerHTML = 'üì¶ Membuat file HTML landing page...';
            
            for (let i = 0; i < currentBooks.length; i++) {
                const book = currentBooks[i];
                const html = generateLandingPage(book, domain, smartlink, buttonText, adsScript);
                folder.file(book.filename, html);
                
                if (i % 20 === 0) {
                    await new Promise(r => setTimeout(r, 5));
                }
            }
            
            // Sitemap
            const sitemap = generateSitemap(currentBooks, domain);
            folder.file('sitemap.xml', sitemap);
            
            // Index
            const indexHtml = generateIndexHTML(currentBooks, domain);
            folder.file('index.html', indexHtml);
            
            document.getElementById('progressStatus').innerHTML = '‚úÖ Download ZIP...';
            
            const zipBlob = await zip.generateAsync({ type: 'blob' });
            saveAs(zipBlob, `${folderName}-${currentBooks.length}books-${Date.now()}.zip`);
        }
        
        // DOWNLOAD SITEMAP
        function downloadSitemap() {
            if (currentBooks.length === 0) {
                alert('Generate dulu!');
                return;
            }
            
            const domain = document.getElementById('domain').value.trim().replace(/^https?:\/\//, '').replace(/\/$/, '');
            const sitemap = generateSitemap(currentBooks, domain);
            const blob = new Blob([sitemap], { type: 'application/xml' });
            saveAs(blob, `sitemap-${Date.now()}.xml`);
        }
    </script>
</body>
</html>
